Code1: 
#!/bin/bash

# This is automation script for Passwordless authentication
file=path_to_your_file   # Where IPs are stored for each server/node
key=Path_to_your_key_file   # Only mention path to your key file (.pem file)

for host in $(cat "$file"); do
  ssh-copy-id -f "-o IdentityFile $key" "$host"
done


Code2: 
#! /bin/bash

file=Path_to_your_hosts/Servers
key=Path_to_Your_Public_key

While IFS= read -r host; do
[[ -z "$host" || "$host" =~ *\s*\[.*\] ]] && continue
#The above line will skip empty line or Grouping, Normally that we do while managind Nodes

ssh-copy-id -f "-o IdentityFile=$key" "$host"

done < "$file"
  
